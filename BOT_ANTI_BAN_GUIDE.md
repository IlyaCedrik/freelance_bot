# üõ°Ô∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—é –±–∞–Ω–∞ Telegram –±–æ—Ç–∞

## üö® –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –±–∞–Ω–æ–≤ –±–æ—Ç–æ–≤

### 1. **–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ Rate Limits**
- **–õ–∏–º–∏—Ç**: 30 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É –¥–ª—è –±–æ—Ç–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- **‚úÖ –†–µ—à–µ–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ª–∏–º–∏—Ç–æ–º 25 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫

### 2. **–°–ø–∞–º –∏ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–µ–π–∫–æ–≤—ã—Ö/—Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- **‚úÖ –†–µ—à–µ–Ω–∏–µ**: –û—Ç–∫–ª—é—á–µ–Ω—ã mock –ø–∞—Ä—Å–µ—Ä—ã, –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞

### 3. **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–≤—à–∏–º –±–æ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- **‚úÖ –†–µ—à–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –º–æ–≥—É—Ç –Ω–∞—Ä—É—à–∞—Ç—å —Ä–∞–±–æ—Ç—É API
- **‚úÖ –†–µ—à–µ–Ω–∏–µ**: –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### Scheduler Service (`src/services/scheduler.js`)
```javascript
// ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ:
- –û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π —Å rate limiting (25 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (403 –æ—à–∏–±–∫–∏)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è Markdown —Ç–µ–∫—Å—Ç–∞
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–∫–∞–∑–æ–≤ —Å 10 –¥–æ 5
- –ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

### Job Parser (`src/services/jobParser.js`)
```javascript
// ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω—ã mock –ø–∞—Ä—Å–µ—Ä—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞
- –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ mock —Ä–µ–∂–∏–º–µ
```

### Main Bot (`src/index.js`)
```javascript
// ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
```

## üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
```javascript
// –î–æ–±–∞–≤—å—Ç–µ –≤ scheduler.js
console.log(`üìä Queue size: ${this.messageQueue.length}, Active users: ${activeUsers.length}`);

// –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ metrics:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API
```

### 2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
–î–æ–±–∞–≤—å—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —á–∞—Å—Ç–æ—Ç—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ/–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å "—Ç–∏—Ö–∏–µ —á–∞—Å—ã" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏

### 3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞**
```javascript
// –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∑–∞–∫–∞–∑–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ:
function validateJob(job) {
  return job.title && 
         job.url && 
         job.url.startsWith('http') &&
         job.title.length > 10 &&
         !job.title.includes('test') &&
         !job.title.includes('mock');
}
```

### 4. **Webhook –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
```javascript
// –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∏ webhook:
app.post('/webhook', express.raw({type: 'application/json'}), (req, res) => {
  // –ü—Ä–æ–≤–µ—Ä—å—Ç–µ X-Telegram-Bot-Api-Secret-Token –∑–∞–≥–æ–ª–æ–≤–æ–∫
  const secretToken = req.headers['x-telegram-bot-api-secret-token'];
  if (secretToken !== process.env.WEBHOOK_SECRET) {
    return res.status(401).send('Unauthorized');
  }
  
  bot.handleUpdate(req.body);
  res.sendStatus(200);
});
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è –±–æ—Ç–∞

### –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ `/health` —ç–Ω–¥–ø–æ–∏–Ω—Ç:
```javascript
app.get('/health', async (req, res) => {
  try {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å Telegram
    const botInfo = await bot.telegram.getMe();
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
    const { data, error } = await supabase.from('users').select('count').single();
    
    res.json({ 
      status: 'ok',
      bot: botInfo.username,
      database: error ? 'error' : 'ok',
      timestamp: new Date().toISOString(),
      queueSize: schedulerInstance?.messageQueue?.length || 0
    });
  } catch (error) {
    res.status(500).json({ 
      status: 'error', 
      error: error.message,
      timestamp: new Date().toISOString()
    });
  }
});
```

## ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### –ù–ï –¥–µ–ª–∞–π—Ç–µ:
1. **‚ùå –ú–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫**
2. **‚ùå –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ/—Ñ–µ–π–∫–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞**
3. **‚ùå –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ 403 (Forbidden)**
4. **‚ùå –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—â–µ 30 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É**
5. **‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–æ—Ç–æ–≤ —Å –æ–¥–Ω–æ–≥–æ IP**

### ‚úÖ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:
1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ rate limiting**
2. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –≤—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ API**
3. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π**
4. **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏**
5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –±–æ—Ç–∞**

## üöÄ –ó–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –±–æ—Ç**
2. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥** (–∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –≤–Ω–µ—Å–µ–Ω—ã)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**:
   ```bash
   npm start
   ```
5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π**

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ `/health` —ç–Ω–¥–ø–æ–∏–Ω—Ç
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π 